<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UTPP: UTPP - A New Generation of UnitTest++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UTPP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">UTPP - A New Generation of UnitTest++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a test framework based on UnitTest++.</p>
<p>Latest version can be downloaded from <a href="https://neacsum.github.com/utpp">GitHub</a>.</p>
<p>There is also <a href="https://neacsum.github.io/utpp">documentation</a> generated with Doxygen.</p>
<p>Author: Mircea Neacsu (<a href="#" onclick="location.href='mai'+'lto:'+'mir'+'ce'+'a@n'+'ea'+'csu'+'.n'+'et'; return false;">mirce<span style="display: none;">.nosp@m.</span>a@ne<span style="display: none;">.nosp@m.</span>acsu.<span style="display: none;">.nosp@m.</span>net</a>)</p>
<h1>License</h1>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2017-2022 Mircea Neacsu</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>For more information see the [LICENSE](LICENSE) file.</p>
<h1>Building</h1>
<p>This is a headers only library. There is nothing to build.</p>
<h1>Usage</h1>
<p>Here is a simple example of a test program: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">#include &lt;utpp/utpp.h&gt;</div>
<div class="line"> </div>
<div class="line">bool earth_is_round ();</div>
<div class="line">double earth_radius_km ();</div>
<div class="line"> </div>
<div class="line">TEST (EarthShape)</div>
<div class="line">{</div>
<div class="line">  CHECK (earth_is_round ());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST (HowBigIsEarth)</div>
<div class="line">{</div>
<div class="line">  CHECK_CLOSE (6371., earth_radius_km(), 1.);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST_MAIN (int argc, char** argv)</div>
<div class="line">{</div>
<div class="line">  return UnitTest::RunAllTests ();</div>
<div class="line">}</div>
</div><!-- fragment --><p>The program contains two tests: one that checks if the <code>earth_is_round</code> function returns <em>true</em> and another one that checks if the earth_radius_km function is close enough to the expected value.</p>
<p>The main program is defined using the <code>TEST_MAIN</code> macro. It runs all the tests and, if all goes well, returns 0.</p>
<p>Tests are introduced by the <code>TEST</code> macro followed by a block of code. Throughout the test you can check different conditions using one of the <code>CHECK_...</code> macros.</p>
<p>The example above showed two of these macros: CHECK verifies that a condition is true, while CHECK_CLOSE verifies that two values are closer than a specified limit.</p>
<p>Here is another example: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">const char *planet_name () {</div>
<div class="line">  return &quot;Earth&quot;;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST (PlanetName)</div>
<div class="line">{</div>
<div class="line">  CHECK_EQUAL (&quot;Earth&quot;, planet_name ());</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code>CHECK_EQUAL</code> macro verifies that two values compare for equality. It can compare any values for which an equality operator is defined.</p>
<p>You can also test if an exception is thrown: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">class flat_earth_exception : public std::exception {</div>
<div class="line">public:</div>
<div class="line">  const char *what () { return &quot;Earth is not flat!&quot;; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">void go_to_end_of_earth ()</div>
<div class="line">{</div>
<div class="line">  throw flat_earth_exception();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST (EndOfTheEarth)</div>
<div class="line">{</div>
<div class="line">  CHECK_THROW (flat_earth_exception, go_to_end_of_earth ());</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Grouping Tests</h2>
<p>Tests can be defined in different source files. The magic behind UTPP will make sure that they are all executed but it doesn't make any promise as to the order of execution between different files. If you need some kind of ordering, you can group tests in <em>suites</em>. UTPP will execute all the tests in one suite before starting another. Suites can also be used to get synthetic results for a group of tests.</p>
<p>Here is an example of a test suite definition: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">SUITE (MyNiceTests)</div>
<div class="line">{</div>
<div class="line">// ... many tests here</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Fixtures</h2>
<p>When performing test you need certain objects and values to be in a known state before the beginning of the test. This is called a <em>fixture</em>. In UTPP any object with a default constructor can be used as a fixture. Your tests will be derived from that object and the state of the object is defined by the fixture constructor.</p>
<p>Example: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">void exchange_to_eur (double&amp; usd, double&amp; eur);</div>
<div class="line"> </div>
<div class="line">struct Account_fixture {</div>
<div class="line">  Account_fixture () : amount_usd (100), amount_eur (0), amount_chf (0) {}</div>
<div class="line">  ~Account_fixture () {}</div>
<div class="line"> </div>
<div class="line">  double amount_usd;</div>
<div class="line">  double amount_eur;</div>
<div class="line">  double amount_chf;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">TEST_FIXTURE (Account_fixture, TestExchangeEur)</div>
<div class="line">{</div>
<div class="line">  exchange_to_eur (amount_usd, amount_eur);</div>
<div class="line">  CHECK_EQUAL (0, amount_usd);</div>
<div class="line">  CHECK (amount_eur &gt; 0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>A test that uses a fixture is defined using a <code>TEST_FIXTURE</code> macro that takes as arguments the name of the fixture and the name of the test. The fixture constructor is invoked right before the beginning of the test and it insures that <code>amount_usd</code> is set to 100. Because the test object is derived from the fixture object, any public or protected members of the fixture are directly available in the test body.</p>
<p>When the test finishes, the fixture destructor gets called and should release any resources allocated by the constructor.</p>
<h2>Aborting a Test</h2>
<p>If something goes terribly wrong in a test, the execution can be aborted using the ABORT or ABORT_EX macros. They work exactly like CHECK and CHECK_EX macros but, once triggered, the remaining test is abandoned.</p>
<p>Example: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">TEST_FIXTURE (Account_fixture, Test_Abort)</div>
<div class="line">{</div>
<div class="line">  exchange_to_chf (amount_usd, amount_chf);</div>
<div class="line">  ABORT (amount_usd);</div>
<div class="line">  printf (&quot;Never gets here&quot;);</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Results</h2>
<p>UTPP results are produced by an object called a <em>Reporter</em>. There can be different type of reporters depending on where the output must be directed. By default The <code><a class="el" href="utpp_8h.html#a011d106d4150ae0c8d3fdd63ef8762e5" title="Run all tests from all test suites.">RunAllTests()</a></code> function uses a reporter that sends results to <code>stdout</code>. The library provides two other reporters: one that generates the output using the <code>OutputDebugString</code> function and one that sends results to an XML file with a structure similar to the files created by NUnit.</p>
<p>Here is an example how to use the XML reporter: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">int main (int argc, char **argv)</div>
<div class="line">{</div>
<div class="line">  std::ofstream os (&quot;tests.xml&quot;);</div>
<div class="line">  UnitTest::ReporterXml xml (os);</div>
<div class="line">  UnitTest::RunAllTests (xml);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Results file is similar this sample: </p><div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">utpp-results</span> <span class="keyword">total</span>=<span class="stringliteral">&quot;21&quot;</span> <span class="keyword">failed</span>=<span class="stringliteral">&quot;11&quot;</span> <span class="keyword">failures</span>=<span class="stringliteral">&quot;11&quot;</span> <span class="keyword">duration</span>=<span class="stringliteral">&quot;12.031&quot;</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">start-time</span>&gt;2022-02-01 01:22:16<span class="keyword">Z</span>&lt;/<span class="keywordtype">start-time</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">command-line</span>&gt;&amp;<span class="keyword">quot</span>;<span class="keyword">C:</span>\<span class="keyword">development</span>\<span class="keyword">utpp</span>\<span class="keyword">sample</span>\<span class="keyword">x64</span>\<span class="keyword">Debug</span>\<span class="keyword">sample.exe</span>&amp;<span class="keyword">quot</span>; &lt;/<span class="keywordtype">command-line</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">suite</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;EarthSuite&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">test</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;EarthShape&quot;</span> <span class="keyword">time_ms</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">test</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HowBigIsEarth&quot;</span> <span class="keyword">time_ms</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">test</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PlanetName&quot;</span> <span class="keyword">time_ms</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">test</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Martians&quot;</span> <span class="keyword">time_ms</span>=<span class="stringliteral">&quot;0&quot;</span>&gt;</div>
<div class="line">   &lt;<span class="keywordtype">failure</span> <span class="keyword">message</span>=&quot;<span class="keyword">C:</span>\<span class="keyword">development</span>\<span class="keyword">utpp</span>\<span class="keyword">sample</span>\<span class="keyword">sample.cpp</span>(120) : <span class="keyword">Expected</span> &amp;<span class="keyword">apos</span>;<span class="keyword">Mars</span>&amp;<span class="keyword">apos</span>; <span class="keyword">but</span> <span class="keyword">was</span> &amp;<span class="keyword">apos</span>;<span class="keyword">Earth</span>&amp;<span class="keyword">apos</span>;<span class="stringliteral">&quot;/&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;/test&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;test name=&quot;</span><span class="keyword">EndOfTheEarth</span><span class="stringliteral">&quot; time_ms=&quot;</span>1&quot;/&gt;</div>
<div class="line"> &lt;/<span class="keywordtype">suite</span>&gt;</div>
<div class="line"> ....</div>
</div><!-- fragment --><h2>Execution Control</h2>
<p>While in most cases <code>RunAllTests</code> function is all that's needed to execute all tests, there may be cases where you need a finer control. The <code><a class="el" href="utpp_8h.html#a392224b71e7359957c8f64ed596cba95" title="Run all tests from one suite.">UnitTest::RunSuite()</a></code> function allows you to run one particular suite while the <code>UnitTest::DisbleSuite()</code> allows you to disable a suite.</p>
<p>More details about the internal architecture of this framework can be found in the <a class="el" href="md_achitecture.html">architecture</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
