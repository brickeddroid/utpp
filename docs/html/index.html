<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UTPP: Light C++ Unit Test Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UTPP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Light C++ Unit Test Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a new version of the excellent <a href="https://github.com/unittest-cpp">UnitTest++</a> Some of the reasons for making this new version are detailed in the <a class="el" href="md_achitecture.html">architecture document</a>.</p>
<p>Latest version can be downloaded from <a href="https://neacsum.github.com/utpp">GitHub</a> or <a href="https://bitbucket.org/neacsum/utpp">BitBucket</a>.</p>
<h2>Installation</h2>
<p>For Windows users, there is a Visual Studio 2019 solution. Just download the repository and build the UTPP library.</p>
<p>For Unix users there is a makefile that creates a static link library. For 32-bit version add ARCH=x86 to make command line. For debug version add _DEBUG=1.</p>
<h2>Usage</h2>
<h3>Getting Started</h3>
<p>Here is a simple example of a test program: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="utpp_8h.html">utpp/utpp.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> earth_is_round ();</div>
<div class="line"><span class="keywordtype">double</span> earth_radius_km ();</div>
<div class="line"> </div>
<div class="line"><a class="code" href="test__macros_8h.html#aa336661b38c04ab56c34842870688872">TEST</a> (EarthShape)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="check__macros_8h.html#a76bb1ed1c7c2e0e58db57d181d5afbf8">CHECK</a> (earth_is_round ());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="test__macros_8h.html#aa336661b38c04ab56c34842870688872">TEST</a> (HowBigIsEarth)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="check__macros_8h.html#a4e1bd8b7b16e3e16c07270b99cc4de75">CHECK_CLOSE</a> (6371., earth_radius_km(), 1.);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="utpp_8h.html#a011d106d4150ae0c8d3fdd63ef8762e5">UnitTest::RunAllTests</a> ();</div>
<div class="line">}</div>
</div><!-- fragment --><p>The program contains two tests: one that checks if the <code>earth_is_round</code> function returns <em>true</em> and another one that checks if the earth_radius_km function is close enough to the expected value.</p>
<p>The main program runs all the tests and, if all goes well, returns 0.</p>
<p>Tests are introduced by the TEST macro followed by a block of code. Throughout the test you can check different conditions using one of the CHECK_... macros.</p>
<p>The example above showed two of these macros: CHECK verifies that a condition is true, while CHECK_CLOSE verifies that two values are closer than a specified limit.</p>
<p>Here is another example: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *planet_name () {</div>
<div class="line">  <span class="keywordflow">return</span> <span class="stringliteral">&quot;Earth&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="test__macros_8h.html#aa336661b38c04ab56c34842870688872">TEST</a> (PlanetName)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="check__macros_8h.html#ad8fa79f5d491cc01af302832785e90fe">CHECK_EQUAL</a> (<span class="stringliteral">&quot;Earth&quot;</span>, planet_name ());</div>
<div class="line">}</div>
</div><!-- fragment --><p>The CHECK_EQUAL macro verifies that two values compare for equality. It can compare any values for which an equality operator is defined.</p>
<p>You can also test if an exception is thrown: </p><div class="fragment"><div class="line"><span class="keyword">class </span>flat_earth_exception : <span class="keyword">public</span> std::exception {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *what () { <span class="keywordflow">return</span> <span class="stringliteral">&quot;Earth is not flat!&quot;</span>; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> go_to_end_of_earth ()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">throw</span> flat_earth_exception();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="test__macros_8h.html#aa336661b38c04ab56c34842870688872">TEST</a> (EndOfTheEarth)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="check__macros_8h.html#a28c44c9cad030563c82613cf2cef08de">CHECK_THROW</a> (flat_earth_exception, go_to_end_of_earth ());</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Grouping Tests</h3>
<p>Tests can be defined in different source files. The magic behind UTPP will make sure that they are all executed but it doesn't make any promise as to the order of execution between different files. If you need some kind of ordering, you can group tests in <em>suites</em>. UTPP will execute all the tests in one suite before starting another. Suites can also be used to get synthetic results for a group of tests.</p>
<p>Here is an example of a test suite definition: </p><div class="fragment"><div class="line"><a class="code" href="test__macros_8h.html#a0fbd59b606cb6db3b7d950f90c3f6878">SUITE</a> (MyNiceTests)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// ... many tests here</span></div>
<div class="line">}</div>
</div><!-- fragment --><h3>Fixtures</h3>
<p>When performing test you need certain objects and values to be in a known state before the beginning of the test. This is called a <em>fixture</em>. In UTPP any object with a default constructor can be used as a fixture. Your tests will be derived from that object and the state of the object is defined by the fixture constructor.</p>
<p>Here is an example: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> exchange_to_eur (<span class="keywordtype">double</span>&amp; usd, <span class="keywordtype">double</span>&amp; eur);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>Account_fixture {</div>
<div class="line">  Account_fixture () : amount_usd (100), amount_eur (0), amount_chf (0) {}</div>
<div class="line">  ~Account_fixture () {}</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">double</span> amount_usd;</div>
<div class="line">  <span class="keywordtype">double</span> amount_eur;</div>
<div class="line">  <span class="keywordtype">double</span> amount_chf;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code" href="test__macros_8h.html#a123c32bf07d1ccebda460f6a78b15f17">TEST_FIXTURE</a> (Account_fixture, TestExchangeEur)</div>
<div class="line">{</div>
<div class="line">  exchange_to_eur (amount_usd, amount_eur);</div>
<div class="line">  <a class="code" href="check__macros_8h.html#ad8fa79f5d491cc01af302832785e90fe">CHECK_EQUAL</a> (0, amount_usd);</div>
<div class="line">  <a class="code" href="check__macros_8h.html#a76bb1ed1c7c2e0e58db57d181d5afbf8">CHECK</a> (amount_eur &gt; 0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>A test that uses a fixture is defined using a TEST_FIXTURE macro that takes as arguments the name of the fixture and the name of the test. The fixture constructor is invoked right before the beginning of the test and it insures that <code>amount_usd</code> is set to 100. Because the test object is derived from the fixture object any public or protected members of the fixture are directly available in the test body.</p>
<p>When the test finishes, the fixture destructor gets called and can release any resources allocated by the constructor.</p>
<h3>Aborting a Test</h3>
<p>If something goes terribly wrong in a test, the execution can be aborted using the ABORT or ABORT_EX macros. They work exactly like CHECK and CHECK_EX macros but, once triggered, the remaining test is abandoned.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code" href="test__macros_8h.html#a123c32bf07d1ccebda460f6a78b15f17">TEST_FIXTURE</a> (Account_fixture, Test_Abort)</div>
<div class="line">{</div>
<div class="line">  exchange_to_chf (amount_usd, amount_chf);</div>
<div class="line">  <a class="code" href="check__macros_8h.html#a47efb5b76a5915cb121e1cd1b3061867">ABORT</a> (amount_usd);</div>
<div class="line">  printf (<span class="stringliteral">&quot;Never gets here&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Results</h3>
<p>UTPP results are produced by an object called a <em>Reporter</em>. There can be different type of reporters depending on where the output must be directed. By default The <a class="el" href="utpp_8h.html#a011d106d4150ae0c8d3fdd63ef8762e5" title="Run all tests from all test suites.">RunAllTests()</a> function uses a reporter that sends results to stdout. The library provides two other reporters: one that generates the output using the OutputDebugString function and one that sends results to an XML file with a structure similar to the files created by NUnit.</p>
<p>Here is an example how to use the XML reporter: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">  std::ofstream os (<span class="stringliteral">&quot;tests.xml&quot;</span>);</div>
<div class="line">  <a class="code" href="class_unit_test_1_1_reporter_xml.html">UnitTest::ReporterXml</a> xml (os);</div>
<div class="line">  <a class="code" href="utpp_8h.html#a011d106d4150ae0c8d3fdd63ef8762e5">UnitTest::RunAllTests</a> (xml);</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Execution Control</h3>
<p>While in most cases RunAllTests function is all that's needed to execute all tests, there may be cases where you need a finer control. The <a class="el" href="utpp_8h.html#a392224b71e7359957c8f64ed596cba95" title="Run all tests from one suite.">UnitTest::RunSuite()</a> function allows you to run one particular suite while the UnitTest::DisbleSuite() allows you to disable a suite. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="acheck__macros_8h_html_a76bb1ed1c7c2e0e58db57d181d5afbf8"><div class="ttname"><a href="check__macros_8h.html#a76bb1ed1c7c2e0e58db57d181d5afbf8">CHECK</a></div><div class="ttdeci">#define CHECK(value)</div><div class="ttdoc">Generate a failure if value is 0. Failure message is the value itself.</div><div class="ttdef"><b>Definition:</b> check_macros.h:17</div></div>
<div class="ttc" id="autpp_8h_html"><div class="ttname"><a href="utpp_8h.html">utpp.h</a></div><div class="ttdoc">Master include file.</div></div>
<div class="ttc" id="atest__macros_8h_html_a123c32bf07d1ccebda460f6a78b15f17"><div class="ttname"><a href="test__macros_8h.html#a123c32bf07d1ccebda460f6a78b15f17">TEST_FIXTURE</a></div><div class="ttdeci">#define TEST_FIXTURE(Fixture, Name)</div><div class="ttdoc">Defines a test case with an associated fixture.</div><div class="ttdef"><b>Definition:</b> test_macros.h:48</div></div>
<div class="ttc" id="atest__macros_8h_html_a0fbd59b606cb6db3b7d950f90c3f6878"><div class="ttname"><a href="test__macros_8h.html#a0fbd59b606cb6db3b7d950f90c3f6878">SUITE</a></div><div class="ttdeci">#define SUITE(Name)</div><div class="ttdoc">Declares the beginning of a new test suite.</div><div class="ttdef"><b>Definition:</b> test_macros.h:26</div></div>
<div class="ttc" id="acheck__macros_8h_html_a4e1bd8b7b16e3e16c07270b99cc4de75"><div class="ttname"><a href="check__macros_8h.html#a4e1bd8b7b16e3e16c07270b99cc4de75">CHECK_CLOSE</a></div><div class="ttdeci">#define CHECK_CLOSE(expected, actual, tolerance)</div><div class="ttdef"><b>Definition:</b> check_macros.h:74</div></div>
<div class="ttc" id="autpp_8h_html_a011d106d4150ae0c8d3fdd63ef8762e5"><div class="ttname"><a href="utpp_8h.html#a011d106d4150ae0c8d3fdd63ef8762e5">UnitTest::RunAllTests</a></div><div class="ttdeci">int RunAllTests(Reporter &amp;rpt=GetDefaultReporter(), int max_time_ms=0)</div><div class="ttdoc">Run all tests from all test suites.</div><div class="ttdef"><b>Definition:</b> test_suite.cpp:237</div></div>
<div class="ttc" id="acheck__macros_8h_html_a28c44c9cad030563c82613cf2cef08de"><div class="ttname"><a href="check__macros_8h.html#a28c44c9cad030563c82613cf2cef08de">CHECK_THROW</a></div><div class="ttdeci">#define CHECK_THROW(ExpectedExceptionType, expression)</div><div class="ttdoc">Checks if evaluating the expression triggers an exception of the given type.</div><div class="ttdef"><b>Definition:</b> check_macros.h:174</div></div>
<div class="ttc" id="atest__macros_8h_html_aa336661b38c04ab56c34842870688872"><div class="ttname"><a href="test__macros_8h.html#aa336661b38c04ab56c34842870688872">TEST</a></div><div class="ttdeci">#define TEST(Name)</div><div class="ttdoc">Defines a test case.</div><div class="ttdef"><b>Definition:</b> test_macros.h:34</div></div>
<div class="ttc" id="aclass_unit_test_1_1_reporter_xml_html"><div class="ttname"><a href="class_unit_test_1_1_reporter_xml.html">UnitTest::ReporterXml</a></div><div class="ttdoc">A Reporter that sends results to an XML file.</div><div class="ttdef"><b>Definition:</b> xml_test_reporter.h:19</div></div>
<div class="ttc" id="acheck__macros_8h_html_ad8fa79f5d491cc01af302832785e90fe"><div class="ttname"><a href="check__macros_8h.html#ad8fa79f5d491cc01af302832785e90fe">CHECK_EQUAL</a></div><div class="ttdeci">#define CHECK_EQUAL(expected, actual)</div><div class="ttdoc">Generate a failure if actual value is different from expected.</div><div class="ttdef"><b>Definition:</b> check_macros.h:53</div></div>
<div class="ttc" id="acheck__macros_8h_html_a47efb5b76a5915cb121e1cd1b3061867"><div class="ttname"><a href="check__macros_8h.html#a47efb5b76a5915cb121e1cd1b3061867">ABORT</a></div><div class="ttdeci">#define ABORT(value)</div><div class="ttdoc">Abort current test is value is 0. Abort message is the value itself.</div><div class="ttdef"><b>Definition:</b> check_macros.h:233</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
